From 0fba9784b6db262290a7560b590d37bc359a16d1 Mon Sep 17 00:00:00 2001
From: Konsta <konsta09@gmail.com>
Date: Wed, 27 Mar 2013 10:01:20 +0200
Subject: [PATCH] don't hide pie control settings

Change-Id: Ib0a9b2029174a12fa96a86a9e05b8a867bdf3111

diff --git a/res/values/cm_strings.xml b/res/values/cm_strings.xml
index 3807be7..2e37409 100644
--- a/res/values/cm_strings.xml
+++ b/res/values/cm_strings.xml
@@ -847,7 +847,7 @@ two in order to insert additional control points. \'Remove\' deletes the selecte
 
     <!-- Pie controls -->
     <string name="pie_control_title">Pie controls</string>
-    <string name="pie_control_enabled">Floating controls when Expanded desktop is enabled</string>
+    <string name="pie_control_enabled">Floating controls enabled</string>
     <string name="pie_control_disabled">Floating controls disabled</string>
     <string name="pie_control_sensitivity_title">Responsiveness</string>
     <string name="pie_control_sensitivity_low">Low</string>
diff --git a/res/xml/system_ui_settings.xml b/res/xml/system_ui_settings.xml
index 6680790..fd298c3 100644
--- a/res/xml/system_ui_settings.xml
+++ b/res/xml/system_ui_settings.xml
@@ -46,6 +46,11 @@
         android:title="@string/power_menu_expanded_desktop"
         android:persistent="false" />
 
+    <PreferenceScreen
+        android:key="pie_control"
+        android:fragment="com.android.settings.cyanogenmod.PieControl"
+        android:title="@string/pie_control_title" />
+
     <PreferenceCategory
         android:key="navigation_bar"
         android:title="@string/navigation_bar_category" >
@@ -60,11 +65,6 @@
             android:fragment="com.android.settings.cyanogenmod.NavRing"
             android:title="@string/navigation_ring_title" />
 
-        <PreferenceScreen
-            android:key="pie_control"
-            android:fragment="com.android.settings.cyanogenmod.PieControl"
-            android:title="@string/pie_control_title" />
-
     </PreferenceCategory>
 
     <!-- Device Specific Touchscreen gestures -->
diff --git a/src/com/android/settings/cyanogenmod/SystemUiSettings.java b/src/com/android/settings/cyanogenmod/SystemUiSettings.java
index 5ef4712..384d0bc 100644
--- a/src/com/android/settings/cyanogenmod/SystemUiSettings.java
+++ b/src/com/android/settings/cyanogenmod/SystemUiSettings.java
@@ -84,7 +84,6 @@ public class SystemUiSettings extends SettingsPreferenceFragment  implements
             // Hide navigation bar category on devices without navigation bar
             if (!hasNavBar) {
                 prefScreen.removePreference(findPreference(CATEGORY_NAVBAR));
-                mPieControl = null;
             }
         } catch (RemoteException e) {
             Log.e(TAG, "Error getting navigation bar status");
